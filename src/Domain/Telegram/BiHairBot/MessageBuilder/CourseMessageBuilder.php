<?php
namespace App\Domain\Telegram\BiHairBot\MessageBuilder;

use App\Domain\Telegram\BiHairBot\BiHairBotProvider;
use App\Service\Telegram\ButtonDto;
use App\Service\Telegram\MessageBuilderInterface;
use App\Service\Telegram\MessageDto;
use App\Service\Telegram\UpdateDto;

class CourseMessageBuilder implements MessageBuilderInterface
{

    public const EVENT = 'üíá‚Äç‚ôÄÔ∏è –ö—É—Ä—Å';

    private const MESSAGE_TEXT = '–ù–∞ –∫—É—Ä—Å–µ —Ç–æ–ª—å–∫–æ —Å–∞–º–∞—è –Ω—É–∂–Ω–∞—è –∏ —Ä–∞–±–æ—Ç–∞—é—â–∞—è, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —É—Ö–æ–¥—É –∑–∞ –≤–æ–ª–æ—Å–∞–º–∏ –∏ –∫–æ–∂–µ–π –≥–æ–ª–æ–≤—ã. 
–û–¥–∏–Ω –∫—É—Ä—Å - –ø–æ–ª–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —á—Ç–æ –¥–µ–ª–∞—Ç—å —Å –≤–æ–ª–æ—Å–∞–º–∏ –≤ –ª—é–±–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏: 
‚úÖ –ù–∏–∫–∞–∫–æ–≥–æ —Ç—É–ø–Ω—è–∫–∞ –≤ –º–∞–≥–∞–∑–∏–Ω–µ –ø–µ—Ä–µ–¥ –ø–æ–ª–∫–∞–º–∏ - —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç–µ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –±–∞–Ω–∫–∏.
‚úÖ –ù–µ –±—É–¥–µ—Ç –Ω–µ—É–¥–∞—á–Ω—ã—Ö —Å—Ç—Ä–∏–∂–µ–∫ –∏ –æ–∫—Ä–∞—à–∏–≤–∞–Ω–∏–π - —è –Ω–∞—É—á—É –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –ø–æ–¥–æ–π–¥–µ—Ç –≤–∞—à–∏–º –≤–æ–ª–æ—Å–∞–º, –∞ —á—Ç–æ –ø–æ–∫–∞–ª–µ—á–∏—Ç
‚úÖ –°–æ –º–Ω–æ–π –≤—ã–ª–µ—á–∏–º –ø–µ—Ä—Ö–æ—Ç—å, –æ—Å—Ç–∞–Ω–æ–≤–∏–º –≤—ã–ø–∞–¥–µ–Ω–∏–µ –≤–æ–ª–æ—Å, –æ—Ç—Ä–∞—Å—Ç–∏–º –¥–ª–∏–Ω—É
üóì–ì–æ—Ç–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –≤–æ–ª–æ—Å –ø–æ–¥ –ª—é–±—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –æ—Ç —Ä–∞—Å—á–µ—Å–∫–∏ –¥–æ —Ñ–µ–Ω–∞

üéÅ –ì–∞–π–¥-–∫–æ–Ω—Å–ø–µ–∫—Ç –∫—Ä–∞—Ç–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å –∫—É—Ä—Å–∞ –¥–ª—è –≤–∞—à–µ–≥–æ —É–¥–æ–±—Å—Ç–≤–∞ - –æ—Å—Ç–∞–µ—Ç—Å—è —Å –≤–∞–º–∏ –Ω–∞–≤—Å–µ–≥–¥–∞
üéÅ –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–∫–∞ –≤ —É–¥–æ–±–Ω–æ–º –¥–ª—è –∫–∞–∂–¥–æ–π —É—á–µ–Ω–∏—Ü—ã —Ñ–æ—Ä–º–∞—Ç–µ -–≤–∏–¥–µ–æ —Å–æ–∑–≤–æ–Ω, –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–º—Å, –ø–µ—Ä–µ–ø–∏—Å–∫–∞.

–§–æ—Ä–º–∞—Ç: –æ–Ω–ª–∞–π–Ω –≤–µ–±–∏–Ω–∞—Ä—ã 
–î–æ—Å—Ç—É–ø –∫ –∫—É—Ä—Å—É: 3 –º–µ—Å—è—Ü–∞ (–º–æ–∂–Ω–æ –ø—Ä–æ–¥–ª–∏—Ç—å)

–í—Å—é –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∫—É—Ä—Å–∞ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –≤ –∫–∞–Ω–∞–ª–µ —Å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º –ø—Ä–æ–±–Ω—ã–º —É—Ä–æ–∫–æ–º. –ü–µ—Ä–µ—Ö–æ–¥–∏ –ø–æ —Å—Å—ã–ª–∫–µ!
';

    /**
     * @param UpdateDto $update
     * @return MessageDto[]|\Generator
     */
    public function build(UpdateDto $update): \Generator
    {
        yield new MessageDto(
            $update->getChatId(),
            self::MESSAGE_TEXT,
            [
                new ButtonDto('–û–ø–ª–∞—Ç–∏—Ç—å', PayMessageBuilder::EVENT),
                new ButtonDto('–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø—Ä–æ–±–Ω—ã–π —É—Ä–æ–∫', url: 'https://t.me/+bO_WDt_T-bxhY2Ji')
            ],
        );
    }

    /**
     * @param string $type
     * @param string $botName
     *
     * @return bool
     */
    public function supports(string $type, string $botName): bool
    {
        return $type === self::EVENT && $botName === BiHairBotProvider::BOT_NAME;
    }
}
